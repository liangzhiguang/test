<!DOCTYPE html>
<html>
<head>
    <title>自动复制按钮</title>
    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text)
                .then(function () {
                    alert("已复制到剪贴板！");
                })
                .catch(function (error) {
                    console.error("复制失败:", error);
                });
        }

        function readFile(prompt) {
            var file = "prompt.txt";
            var rawFile = new XMLHttpRequest();
            rawFile.open("GET", file, true);
            rawFile.onreadystatechange = function () {
                if (rawFile.readyState === 4 && rawFile.status === 200) {
                    var content = rawFile.responseText;
                    var startIndex = content.indexOf("[" + prompt + "开始]");
                    var endIndex = content.indexOf("[" + prompt + "结束]");
                    if (startIndex !== -1 && endIndex !== -1 && startIndex < endIndex) {
                        var trimmedContent = content.substring(startIndex + prompt.length + 2, endIndex).trim().split("\n").slice(1).join("\n");
                        copyToClipboard(trimmedContent);
                    } else {
                        alert("未找到指定内容！");
                    }
                }
            };
            rawFile.send();
        }

        window.addEventListener('DOMContentLoaded', function () {
            var buttons = [
                { prompt: '小说家提示词', id: 'btnPromptWriter' },
                { prompt: '同类歌曲推荐人提示词', id: 'btnPromptSong' },
                { prompt: '免费咨询律师提示词', id: 'btnPromptLawyer' },
                { prompt: 'python老师提示词', id: 'btnPromptPython' }
            ];

            buttons.forEach(function (buttonInfo) {
                var button = document.createElement("button");
                button.textContent = "先复制 " + buttonInfo.prompt;
                button.addEventListener('click', function () {
                    readFile(buttonInfo.prompt);
                });
                document.getElementById("buttonContainer").appendChild(button);
            });
        });
    </script>
</head>
<body>
    <div id="buttonContainer"></div>
</body>
</html>
