<!DOCTYPE html>
<html>
<head>
  <title>学习先复制提示词，粘到ChatGPT</title>
  <style>
    button {
      width: 100%;
      display: block;
      margin: 0;
      padding: 0;
      font-size: 6vw;
      font-weight: bold;
      color: white;
      background-color: var(--button-color);
      border: none;
      border-radius: 30px; /* 调整此处的数值来改变圆角大小 */
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      height: 20vh;
    }
  </style>
  <script>
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text)
        .then(() => {
          alert("复制成功！");
          if (confirm("复制成功，是否跳转到ChatGPT页面？")) {
            window.location.href = "index.html";
          }
        })
        .catch((error) => {
          console.error("复制失败：", error);
        });
    }

    function getRandomColor(previousColor) {
      var colors = ["#FF0000", "#0000FF", "#008000", "#FFA500", "#800080", "#006666", "#8B008B", "#B8860B"];
      var randomColor = previousColor;
      while (randomColor === previousColor) {
        randomColor = colors[Math.floor(Math.random() * colors.length)];
      }
      return randomColor;
    }

    function readFile() {
      var file = "prompt_stydy8.txt";
      fetch(file)
        .then(response => response.text())
        .then(content => {
          var prompts = content.match(/\[(.*?)开始\]/g);
          if (prompts && prompts.length > 0) {
            var buttonContainer = document.getElementById("button-container");
            buttonContainer.innerHTML = "";
            var previousColor = "";
            prompts.forEach(function(prompt, index) {
              var promptName = prompt.substring(1, prompt.length - 3);
              var button = document.createElement("button");
              button.textContent = "：" + promptName;
              var randomColor = getRandomColor(previousColor);
              button.style.setProperty('--button-color', randomColor); // 设置按钮颜色
              previousColor = randomColor;
              button.onclick = function() {
                copyPromptToClipboard(content, promptName);
              };
              buttonContainer.appendChild(button);
              buttonContainer.appendChild(document.createElement("br"));
            });
          } else {
            alert("未找到指定内容！");
          }
        })
        .catch(error => {
          alert("读取文件时发生错误！");
          console.error(error);
        });
    }

    function copyPromptToClipboard(content, promptName) {
      var startIndex = content.indexOf("[" + promptName + "开始]");
      var endIndex = content.indexOf("[" + promptName + "结束]");
      if (startIndex !== -1 && endIndex !== -1 && startIndex < endIndex) {
        var trimmedContent = content.substring(startIndex + promptName.length + 2, endIndex).trim().split("\n").slice(1).join("\n");
        copyToClipboard(trimmedContent);
      } else {
        alert("未找到指定内容！");
      }
    }
  </script>
</head>
<body onload="readFile()">
  <div id="button-container"></div>
</body>
</html>
